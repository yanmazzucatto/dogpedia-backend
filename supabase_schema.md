# Esquema do Banco de Dados (Supabase)

Este arquivo documenta a estrutura do banco de dados no Supabase, necessária para o Dogpedia.

## 1. Resumo das Tabelas

| Tabela       | Colunas Chave                                    | Relação com Frontend                |
| :----------- | :----------------------------------------------- | :---------------------------------- |
| `breeds`     | `id`, `name`, `slug`, `image_url`, `category_id` | Corresponde à interface `Breed`.    |
| `categories` | `id`, `name`, `slug`, `image_url`                | Corresponde à interface `Category`. |
| `posts`      | `id`, `author_id`, `image_url`, `caption`        | Corresponde à interface `Post`.     |
| `comments`   | `id`, `post_id`, `author_id`, `text`             | Corresponde à interface `Comment`.  |

## 2. SQL para Criação (PostgreSQL)

Use o SQL Editor no seu painel Supabase para executar os seguintes comandos para criar e proteger suas tabelas.

### 2.1. Criação das Tabelas

```sql
-- 1. Tabela de Categorias
CREATE TABLE categories (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL,
  slug TEXT NOT NULL UNIQUE,
  image_url TEXT NOT NULL,
  description TEXT
);

-- 2. Tabela de Raças (depende de 'categories')
CREATE TABLE breeds (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL,
  slug TEXT NOT NULL UNIQUE,
  image_url TEXT NOT NULL,
  description TEXT NOT NULL,
  category_id BIGINT REFERENCES categories(id),
  temperament TEXT NOT NULL,
  size TEXT NOT NULL,
  colors TEXT[],
  origin TEXT NOT NULL
);

-- 3. Tabela de Postagens
CREATE TABLE posts (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  author_id UUID REFERENCES auth.users(id) NOT NULL,
  image_url TEXT NOT NULL,
  caption TEXT,
  top_breed_guess TEXT,
  comment_count INT DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT now()
);

-- 4. Tabela de Comentários (depende de 'posts')
CREATE TABLE comments (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  post_id BIGINT REFERENCES posts(id) ON DELETE CASCADE NOT NULL,
  author_id UUID REFERENCES auth.users(id) NOT NULL,
  text TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);
```
